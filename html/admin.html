<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="fr">
<head>
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  <meta charset="utf-8" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
	<!-- CSS de la page -->
	<link rel="stylesheet" href="../CSS/style.css" />
	<!-- CSS des icones -->
	<link rel="stylesheet" href="../CSS/entypo.css" />
  <title> L3C: Le film du mois ! </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	
	<script><!-- Ajax command to add new movie to DB -->
		$(document).ready(function(){
			$('#formFilm').on('submit', function(e) {
				e.preventDefault(); // J'empêche le comportement par défaut du navigateur, c-à-d de soumettre le formulaire
	 
				var $this = $(this); // L'objet jQuery du formulaire	
				
				var genre1,genre2,genre3,g1,g2,g3;
				
				/* /!\ Si g1 = " " NE PAS ENVOYER !!!!*/
				genre1=document.getElementById("genre1");
				g1= genre1[genre1.selectedIndex].value;
				
				if($('#genre2').val != " "){
					genre2=document.getElementById("genre2");
					g2= genre2[genre2.selectedIndex].value;
				}
				if($('#genre3').val != " "){
					genre3=document.getElementById("genre3");
					g3= genre3[genre3.selectedIndex].value;
				}
				console.log('genre:'+ g1);
				
				var data = {
					"title":$('#title').val(),
					"director":$('#realisateur').val(),
					"actors": $('#acteurs').val(),
					"synopsis":$('#synopsis').val(),
					/*affiche stocké localement, chemin DB*/
					"genre1":g1,
					"genre2":g2,
					"genre3":g3,
					"why":$('#justification').val(),
				}
				
				$.ajax( {
					type:'POST',
					url:$this.attr('action'),
					data:data,
					/*processData: false,*/

					success:function(content) {
					alert(content);
					},
					error:function(){
						alert('Error Ajax!');
					}
				});
			});
		});
	</script>
	
</head>

<body>
<!--Div qui regroupe toute la page -->
<div class="body-wrapper" >
	<!-- logo+site -->
	<div class="logo-nav-wrapper">
		<!-- Regroupe le logo-->
		<div class="logo-wrapper">
		
			<h1 class="site-logo">
				<a href="http://localhost:7777">
					<img src="../ressources/logo/L3C.jpg" alt="Couz Cine Club" href="home" >
				</a>
			</h1>
			
		</div>
		<!-- le menu -->
		<div class="nav-wrapper">
			<ul id="menu">
				<li id="li-admin"> ADMIN </li>
				<li><a id="Seance" href="suggestion"> Le Film du mois </a></li>
				<li><a id="about" href="about">A propos</a></li>
				
				<!-- pour aller sur la page de connexion quand se sera gerer 
				<li><a href="connec.html" class="connec"></a></li>
				-->
			</ul>
		</div>
	</div>
	<div id="form">	
		<form id="formFilm" method="post" action="postContent">
			<h2> Ajouter un film : </h2>			
			<ul>
				<li id="Title" >
					<label class="description" >Titre: </label>
					<input id="title" type="text" maxlength="255" value="" placeholder="Titre"/> 
				</li>		
				<li id="Real" >
					<label class="description" >Réalisateur: </label>
					<input id="realisateur" type="text" maxlength="255" value="" placeholder="Réalisateur"/> 
				</li>		
				<li id="Acteurs" >
					<label class="description" >Acteurs: </label>
					<input id="acteurs"  type="text" maxlength="255" value="" placeholder="acteur 1, acteur 2, ..."/> 
				</li>		
				<!-- ComboBox: Genre-->
				<li id="Genre">
					<label class="description"> Genre(s) : </label>
					<select id="genre1">
						<option value="" ></option>
						<option value="action">Action</option>
						<option value="aventure">Aventure</option>
						<option value="biographique">Biographique</option>
						<option value="catastrophe">Catastrophe</option>
						<option value="comedie">Comedie</option>
						<option value="drame">Drame</option>
						<option value="espionnage">Espionnage</option>
						<option value="fantastique">Fantastique</option>
						<option value="historique">Historique</option>
						<option value="horreur">Horreur</option>
						<option value="peplum">Peplum</option>
						<option value="policier">Policier</option> 
						<option value="science-fiction">Science-Fiction</option>
						<option value="thriller">Thriller</option>
						<option value="western">Western</option>
					</select>
					<select id="genre2">
						<option value="" ></option>
						<option value="action">Action</option>
						<option value="aventure">Aventure</option>
						<option value="biographique">Biographique</option>
						<option value="catastrophe">Catastrophe</option>
						<option value="comedie">Comedie</option>
						<option value="drame">Drame</option>
						<option value="espionnage">Espionnage</option>
						<option value="fantastique">Fantastique</option>
						<option value="historique">Historique</option>
						<option value="horreur">Horreur</option>
						<option value="peplum">Peplum</option>
						<option value="policier">Policier</option> 
						<option value="science-fiction">Science-Fiction</option>
						<option value="thriller">Thriller</option>
						<option value="western">Western</option>
					</select>
					<select id="genre3">
						<option value="" ></option>
						<option value="action">Action</option>
						<option value="aventure">Aventure</option>
						<option value="biographique">Biographique</option>
						<option value="catastrophe">Catastrophe</option>
						<option value="comedie">Comedie</option>
						<option value="drame">Drame</option>
						<option value="espionnage">Espionnage</option>
						<option value="fantastique">Fantastique</option>
						<option value="historique">Historique</option>
						<option value="horreur">Horreur</option>
						<option value="peplum">Peplum</option>
						<option value="policier">Policier</option> 
						<option value="science-fiction">Science-Fiction</option>
						<option value="thriller">Thriller</option>
						<option value="western">Western</option>
					</select>
				</li>
				<li id="Synopsis" >
					<label class="description" >Synopsis: </label>
					<textarea id="synopsis" placeholder="Synopsis"></textarea> 
				</li>		
				<li id="Affiche" >
					<label class="description">L'affiche du film: </label>
					<input id="affiche" type="file"/> 					
				</li>		
				<li id="Justification" >
					<label class="description">Pourquoi ce film: </label>
					<textarea id="justification" placeholder="Pourquoi?"></textarea> 
				</li>
				<li id="buttons">
					<div id="ButtonsWrapper" >
						<input type="hidden" name="form_id" value="955925" />
						<input id="saveForm" class="buttonValider" type="submit" value="Valider" />
					</div>
				</li>
			</ul>
		</form>
	</div>
	
	<div class="footer-wrapper">
		<div id="menu-logo" >
			<a href="http://www.univ-lille1.fr/" target="_blank"> <img src="../ressources/logo/logoLille1Mini.png" alt="Université Lille1" >
			<ul id="footer-menu">
				<li><span class="icon-facebook"></span><a class="fb"> Facebook </a></li>
				<li><span class="icon-heart"></span><a class="nous" href="about"> A propos </a></li>
			</ul>

		</div>
		<div id="copyright">
			<p> &copy BennyP & DonDiego. En collaboration avec M.Dufrêne. Université Lille1.
			</p>	
		</div>
	</div>
</div>
</body>
</html>
